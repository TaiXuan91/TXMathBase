# 0X28 连续运算

## 对集合中全体元素的运算

假设有集合$A$，二元运算$f$。$f$可以以$A$中元素为输入。

那么我们定义一种这样的运算$g$。它接受两个参数——集合$A$和运算$f$。（可以通过形式$g(A,f)$来调用。）

1. 运算$g$的第一步，是从$A$中取出两个元素进行运算$f$。记录结果$s$和去除这两个元素后的集合$A$。
1. 第二步是一个循环的过程。从$A$中再取出一个元素来和上一步的结果$s$进行运算。然后记录新的结果$s$以及去除这一次取出元素后的集合$A$。如果$A$没有变成空集则重复这一步。

这样我们通过运算$g$，表示了对集合$A$中元素反复进行运算$f$的过程。省却了一个一个写出来集合$A$中元素的麻烦。本期以后，我并不打算一直使用这个在一般教科书中都没有定义过的看似有点别扭的运算。介绍完后边四种运算之后我们就能抛弃它了。

## 连加运算

假设有集合$A$，集合中的元素可以进行加法运算。那么所谓的连加就是指$g(A,+)$。表示把集合$A$中的元素都加起来。

我们约定用$\sum A$表示连加运算。

## 连乘运算

如果集合$A$中的元素都可以进行乘法（假设定义的是叉乘），那么连乘指$g(A,\times)$。

我们约定用$\prod A$表示连乘运算。

## 连续并集和连续交集

如果$A$中元素都可以进行并集运算，连续并集就是$g(A,\cup)$。

约定用$\bigcup A$表示。

类似还有连续交集$g(A,\cap)$，用$\bigcap A$表示。

注意这里不是要把$A$和什么集合去取并集或者交集。而是把$A$中所有元素取并集或者交集。$A$本身应该是集合的集合。

注意连续并集和连续交集都只接受一个集合的集合作为输入。为了方便区分我在表示连续并集和连续交集时用的符号比并集和交集大一号。

## 另一种写法

如果集合是有限集或者集合中的元素能和自然数（或者正整数，整数）一一对应。那么我们可以采用另一种写法表示连续运算。（以下以连加为例，其他连续运算的表示类似。）

由于这个集合$A$是可数的（能和自然数一一对应，或者是有限集合），我们可以用这样一组符号来表示其中元素。首先用一个字母或者单词作为符号的主体，例如这里我们选择字母“a”。然后在右下角写一个自然数下标组成一个符号，用来表示集合中的元素。

例如集合$A$中有三个元素，那么我们就可以用$a_1,a_2,a_3$来表示这三个元素。如果$A$是无穷可数集合，那么就要用上无穷个自然数来表示，例如$a_1,a_2,a_3,a_4,a_5$……

那么我们用$a_i$来表示所有写成这种形式的元素。$i$只是一个占位符，它用来表示那些用于给集合元素标号的任意一个自然数。一般我们使用$a_i$之类的写法的时候会配套跟上一个对i的限定。比如$a_i,i\in N^+,i\leq 5$表示的就是$a_1,a_2,a_3,a_4,a_5$中的任意一个。

${a_i}$则表示所有$a_i$可能取值的集合。例如$\{a_i\},i\in N^+,i\leq 5$就表示$a_1,a_2,a_3,a_4,a_5$所组成的集合。那么很自然地$\sum\{a_i\},i\in N^+,i\leq 5$应该表示这个这个集合的连加运算。一般我们会省略花括号，并且默认$i$属于自然数集合。然后把对$i$的区间限制写在连加符号上下。一般上边写$i$能取到的最大值，下边写$i$能取到的最小值（写最小值的时候要以等号赋值形式写）。所以这个表达式最终可以写成$\sum\limits_{i=1}^{5}a_i$。是不是简单了很多？

## 表达数列

用$a_i$的形式表达集合元素，在被表达的集合元素拥有某种等差，等比或者递推关系的时候特别好用。

比如定义一个等差数列$a_i=1+i\times2,i\in N,i\leq 5$表示的就是1，3，5，7，9，11（这里注意索引i属于自然数集合，是从0开始算的）。

递推数列表示起来也比较方便，例如斐波那契数列$b_0=1,b_1=1,b_{i+2}=b_{i+1}+b_i,i\in N$。（做索引的不一定是一个数，也可以是一个值为自然数或者正数的表达式。）

另外，表示数列求和的时候，我们不一定要把整个数列求和。在写连加表达式的时候，稍微修改一下对索引的限制就能表示对数列的一个子集求和。比如$\sum\limits_{i=1}^{10}a_i$，可能数列本身有一百多项甚至无穷项。但是这里我们只求索引从1到10的这10项（索引不一定是从1开始的）。

## 用序列做下标

我们也可以用多于一个的下标索引。这在处理集合本身可以分解为几个集合的并集的情况下非常有用（比如矩阵求元素和）。

这时候我们把下标写作一个序列。例如$a_{(i,j)}$，就可以表示形如$a_{(1,3)},a_{(2,3)},a_{(4,4)}$的项。

写序列做下标的连加时，上限也要写成变量赋值的形式方便区分是谁的上限$\sum\limits_{i=1,j=0}^{i=10,j=4}a_{(i,j)}$。另外也可以用不等式或者别的表达式对索引范围进行限制。这时候，可以把对索引的所有限制写在连加符号下方。

让我们分析一个稍微复杂一点的例子$\sum\limits_{0<i<j<5}a_{(i,j)}$。两个索引$i,j$和常数$0,5$要保持三个不等关系，而且两个索引都是正数。那么，可以先分析$i$，然后分析$j$：

* $i=1$，$j$可以是$2,3,4$
* $i=2$，$j$可以是$3,4$
* $i=3$，$j$可以是$4$

所以这个式子就是对$a_{(1,2)},a_{(1,3)},a_{(1,4)},a_{(2,3)},a_{(2,4)},a_{(3,4)}$求和。

## 交换性

本期定义的四种连续运算，都是交换性的运算。当定义的乘法或者加法不可交换时，应当额外说明加或者乘的顺序。不过对于只有一个索引的情况，一般是按索引从小到大进行运算。

## 赋值符号

在这个系列中我用$=$表示变量赋值。而相等关系用$eq$函数表示。

关于“变量”，“赋值”的概念，编程教程中有很多介绍，我在这里不加介绍直接使用。

以后有机会详细讨论逻辑的时候可以探讨一下这些概念的意义和来源。
