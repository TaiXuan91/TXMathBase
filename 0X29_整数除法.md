# 0X29 整数除法

## 倍数

对于整数$a,b$，那么$a\cdot b$称为$a$的倍数（也是$b$的倍数）。$a$（或者$b$）称为$a\cdot b$的因子。

## 整除关系

对于整数$a,b$，如果b是a的倍数。那么我们称$a,b$之间存在整除关系。

我们约定用$candiv(a,b)$表示$a$可以整除$b$。（$b$可以被$a$整除。）

（之所以用“candiv”命名是按照“a can divide b”选的名字 。）

## 带余除法

我们知道整数除以整数得到的不一定是整数。仅当除数和被除数之间存在整除关系时，商才能是整数。

现在我们定义另外一种除法。它不是整数乘法的逆运算，但是在整除的时候这种新定义的除法和原来的除法结果一致。

我们定义运算$floordiv(A,B)$。$A,B$是整数，其运算结果$C=floordiv(A,B)$也是一个整数并且有$B\times C\leq A\leq B\times (C+1)$。

从另一个角度看，$floordiv(A,B)$就是取$A$除以$B$的小数商的不足整数近似。（不足近似就是近似值小于等于真实值，过盈近似就是近似值大于等于真实值。）

我们再定义一个运算$mod(A,B)$。运算结果称为$A$除以$B$所得的余数（有时候也称为模）。$A$除以$B$所得余数实际上等于$A-B\times floordiv(A,B)$。

数学上也采用这样的说法：对于任意整数$a,b$（其中b不为0）,存在整数$c,d$使得$eq(a,(b\times c+d))$。则$c$为$a$除以$b$的整数商，$d$为$a$除以$b$的余数。并且把这种不得到一个有理数，而是得到两个整数的运算称为“带余除法”。

小学会告诉我们“乘法是加法的简便运算”。某种程度上除法也是减法的简便运算。例如9除以2就可以看作连续从9中减去2。减4次之后剩下1。

## 正负问题

自然数进行带余除法，得到的肯定是自然数。那么当有负数参与运算，商和余数的符号如是怎样呢？

这个时候我们可以先算出两个数的小数商。小数商的符号根据同号得正，异号得负的规律很容确定。然后对小数商进行不足近似，得到最近的不足整数。（注意负数取不足近似，绝对值可能反而增大。）然后根据$eq(mod(A,B),(A-B\times floordiv(A,B)))$算出余数。

## 同余

其实，如果按照“对于任意整数$a,b$（其中b不为0）,存在整数$c,d$使得$eq(a,(b\times c+d))$”来说 ，同一个带余除法算式，余数可以有很多选择。比如9除以2。我们可以它商为4，余数为1。也可以说它商为3余数为3。也可以说它商为5，余数为-1。

我们对$floordiv$和$mod$的定义保证了余数与除数的符号一致。如果除数为正，则余数大于等于0，小于除数。如果除数为负，则余数大于除数，小于等于0。

如果两个被除数被同一个除数除，所得余数相等。那么我们这两个除数同余。例如在2作为除数时，1，3，5，7，-1，-3等数是同余的。也是在2作为除数时，2，4，6等数时同余的。在3作为除数时1，4，7等数是同余的。

我们约定用$modeq(m,A,B)$表示在m作为除数时，$A,B$具有同余关系。

需要注意的是，同余关系是一类等价关系（不是一种，而是一类。变换除数就相当于变了一种等价关系。但是不管除数怎样，所有的同余关系都是等价关系）。

## 奇数，偶数

这里我们顺便定义一下奇数和偶数。如果一个整数可以被2整除，那么它就是偶数。否则为基数。（0可以被2整除 ，所以是偶数。）

我们也可以这样说：在2为除数时，和0同余的整数为偶数，和1同余的整数为奇数。

## 用Python计算

Python中的算符`//`就相当于我们的$floordiv$，`%`就相当于$mod$。

需要注意的时Python把这一对运算扩展到了有理数范围内。对有理数也可以进行整除运算。如果进行整除的是有理数，那么余数可能不是整数，但是商一定是整数。
